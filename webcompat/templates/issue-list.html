{% extends "layout.html" %}
{% block body %}
  <div class="IssueList js-issue-page" data-username="{{ session.username }}">
  {% include "shared/nav.html" %}
    <div class="wc-content wc-content--body js-issuelist-filter">
      <script type="text/template" id="issuelist-filter-tmpl">
      <!-- Temporary Header -->
      <h2 class="wc-margin-bottom">Issues</h2>
      <div class="Dropdown Dropdown--large js-dropdown-wrapper"></div>
      <div>
        <button type="button" class="wc-Filter wc-Filter--untriaged" data-filter="untriaged">
          <span class="wc-Filter-count"></span> Untriaged</span>
        </button>
        <button type="button" class="wc-Filter wc-Filter--need" data-filter="needsdiagnosis">
          <span class="wc-Filter-count"></span> Needs Diagnosis</span>
        </button>
        <button type="button" class="wc-Filter wc-Filter--ready" data-filter="contactready">
          <span class="wc-Filter-count"></span> Ready for outreach</span>
        </button>
        <button type="button" class="wc-Filter wc-Filter--sitewait" data-filter="sitewait">
          <span class="wc-Filter-count"></span> Site contacted</span>
        </button>
        <button type="button" class="wc-Filter wc-Filter--close" data-filter="closed">
          <span class="wc-Filter-count"></span> Closed</span>
        </button>
      </div>
      </script>
    </div>
    {% if session.user_id and session.avatar_url %}
    <div class="IssueList-search js-issuelist-search">
      <script type="text/template" id="issuelist-search-tmpl">
      <div class="wc-content IssueList-search-content">
        <input type="text" class="IssueList-search-form mousetrap" placeholder="Search by keyword">
        <button role="button" type="submit" class="r-ResetButton IssueList-search-button js-search-button"><span class="icon icon-search"></span></button>
      </div>
      </script>
    </div>
    {% endif %}
    <div class="IssueList-sorting">
      <div class="wc-content">
        <div class="r-Grid">
          <div class="r-Grid-cell r-all--1of2">
            <div class="js-issue-sorting">
              <script type="text/template" id="issuelist-sorting-tmpl">
                <div class="Dropdown wc-inline-block js-dropdown-wrapper js-dropdown-pagination"></div>
                <div class="Dropdown wc-inline-block js-dropdown-wrapper js-dropdown-sort"></div>
              </script>
            </div>
          </div>
          <div class="r-Grid-cell r-all--1of2 wc-Pagination js-pagination-controls">
            <button class="r-ResetButton wc-Pagination-link js-pagination-previous">previous</button>
            <button class="r-ResetButton wc-Pagination-link js-pagination-next">next</button>
          </div>
        </div>
      </div>
    </div>
    <div class="IssueList-displayed">
      <div class="wc-content js-issue-list">
        <script type="text/template" id="issuelist-issue-tmpl">
        <% if (issues.length) { %>
          <% _.each(issues, function(issue) { %>
          <div class="IssueItem IssueItem--<%= issue.stateClass %> IssueItem--large u-table">
            <div class="IssueItem-section">
              <p class="IssueItem-header">
                <a href="/issues/<%= issue.number %>"><span class="IssueItem-count">Issue <%= issue.number %></span>: <%- issue.title %></a>
              </p>
              <p>
                <span class="IssueItem-metadata">Opened: <time><%= issue.createdAt %></time></span>
                <span class="IssueItem-metadata">Comments: <%= issue.commentNumber %></span>
              </p>
            </div>
            <div class="IssueItem-section">
              <span class="IssueItem-label js-issue-label"><% _.each(issue.labels, function(label) { %>
                <a href="#" class="wc-Labels" title="Labels : <%= label.name %>" style="border-color: #<%=label.color%>"><%= label.name %></a>
              <% }); %></span>
            </div>
          </div>
          <% }); %>
        <% } else { %>
          <div class="IssueList-noResults">
            <div class="IssueList-noResults-title">Sorry, no results were found.</div>
             <ul class="IssueList-noResults-list">
               <li class="IssueList-noResults-list-item">Check your spelling</li>
               <li class="IssueList-noResults-list-item">Try a more general search</li>
               <li class="IssueList-noResults-list-item">Filter by popular labels</li>
               <li class="IssueList-noResults-list-item IssueList-noResults-list-item--label">
                 <ul class="r-ResetList IssueList-noResults-list-labels">
                   <li class="IssueList-noResults-list-labelsItem js-issue-label" >
                     <a class="wc-Labels" href="#" title="Labels : android" style="border-color: #48DE20">android</a>
                    </li>
                   <li class="IssueList-noResults-list-labelsItem js-issue-label">
                     <a class="wc-Labels" href="#" title="Labels : chrome" style="border-color: #FFA500">chrome</a>
                    </li>
                   <li class="IssueList-noResults-list-labelsItem js-issue-label">
                     <a class="wc-Labels" href="#" title="Labels : firefox" style="border-color: #E50000">firefox</a>
                   </li>
                   <li class="IssueList-noResults-list-labelsItem js-issue-label">
                     <a class="wc-Labels" href="#" title="Labels : ie" style="border-color: #3E8AE5">ie</a>
                    </li>
                 </ul>
               </li>
             </ul>
          </div>
        <% } %>
        </script>
      </div>
    </div>
  </div>

<script type="text/template" id="dropdown-tmpl">
<button type="button" class="Dropdown-toggle js-dropdown-toggle">
   <span class="Dropdown-label"><%= dropdownTitle %></span> <span class="icon icon-chevron-down"></span>
</button>
<ul class="Dropdown-content js-dropdown-options" aria-hidden="false">
  <% _.each(dropdownOptions, function(option) { %>
  <li class="Dropdown-item">
    <a href="#" class="Dropdown-link" data-param-key="<%= option.paramKey %>" data-param-value="<%= option.paramValue %>">
      <%= option.title %>
    </a>
  </li>
  <% }); %>
</ul>
</script>

{% endblock %}
{% block extrascripts %}
{%- if config.PRODUCTION or config.DEVELOPMENT -%}
<script src="{{ url_for('static', filename='js/issue-list.min.js') }}"></script>
{% else %}
<script src="{{ url_for('static', filename='js/lib/models/issue.js') }}"></script>
<script src="{{ url_for('static', filename='js/lib/issue-list.js') }}"></script>
{%- endif %}
{% endblock %}

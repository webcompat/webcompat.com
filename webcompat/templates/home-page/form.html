<section
  class="js-ReportForm {% if form.errors %}is-opened{% else %}is-closed{% endif %} grid"
  id="js-ReportForm"
>
  {%- if request.url_rule.endpoint == 'create_issue' %}
    <h1 class="headline-1">Report Site Issue</h1>
  {%- endif %}

  <form
    action="/issues/new"
    class="form grid-row"
    enctype="multipart/form-data"
    method="post"
    novalidate
  >
    <div class="grid-cell">
      <div class="form-text form-element js-Form-group">
        <div class="js-Form-information">
          {{ form.url.label(class_='form-label form-required wc-Form-label') }}
          {% if form.url.errors %}
            {% for error in form.url.errors %}
              <span class="wc-Form-helpMessage">{{ error }}</span>
            {% endfor %}
          {% endif %}
        </div>
        <span class="wc-Form-validation">
          {{ form.url(class_='form-field text-field wc-Form-item required',
             placeholder='e.g. https://example.com',
             required=True, type='url', pattern='') }}
        </span>
      </div>
      <div class="form-radio form-element js-Form-group">
        <div class="js-Form-information">
          <label class="form-label form-required wc-Form-label" for="problem_category">Type of bug</label>
          {% if form.problem_category.errors %}
            {% for error in form.problem_category.errors %}
              <span class="wc-Form-helpMessage">{{ error }}</span>
            {% endfor %}
          {% endif %}
        </div>

        {% for subradio in form.problem_category %}
          {{ subradio(class_='input-radio') }}
          {{ subradio.label(class_='form-label label-radio') }}
        {% endfor %}
      </div>
      <div class="form-text form-element js-Form-group">
        <div class="js-Form-information">
          {{ form.description.label(class_='form-label form-required wc-Form-label') }}
          {% if form.description.errors %}
            {% for error in form.description.errors %}
              <span class="wc-Form-helpMessage">{{ error }}</span>
            {% endfor %}
          {% endif %}
        </div>
        <span class="wc-Form-validation">
          {{ form.description(class_='form-field text-field wc-Form-item required',
             placeholder="e.g. The video doesn't play",
             required=True) }}
        </span>
      </div>
      <div class="form-text form-element js-Form-group">
        {{ form.steps_reproduce.label(class_='form-label wc-Form-label') }}
        {{ form.steps_reproduce(class_='form-field text-field wc-Form-item',
           rows=4,
           placeholder="Please be as detailed as possible.") }}
      </div>
    </div>
    <div class="grid-cell">
      <div class="form-text form-element js-Form-group">
        {{ form.browser.label(class_='wc-Form-label') }}
        <span class="wc-Form-validation">
          {{ form.browser(class_='form-field text-field wc-Form-item') }}
          <span class="form-input-validation check"></span>
        </span>
        <span class="wc-Form-validation js-bug-form-os">
          {{ form.os(class_='form-field text-field wc-Form-item') }}
          <span class="form-input-validation error"></span>
        </span>
      </div>
      <div class="form-radio form-element js-Form-group">
        <div class="js-Form-information">
          {{ form.browser_test.label(class_='wc-Form-label') }}
          {% if form.browser_test.errors %}
            {% for error in form.browser_test.errors %}
              <span class="wc-Form-helpMessage">{{ error }}</span>
            {% endfor %}
          {% endif %}
        </div>
        {% for subradio in form.browser_test %}
          {{ subradio(class_='input-radio') }}
          {{ subradio.label(class_='form-label label-radio') }}
        {% endfor %}
      </div>
      <div class="form-upload form-element js-image-upload js-Form-group">
        <label class="wc-UploadForm wc-UploadForm--homePage js-image-upload-label" for="image">
          {{ form.image(class_='form-input input-upload wc-ButtonUpload', accept='.jpe,.jpg,.jpeg,.gif,.png,.bmp') }}
          {% if form.image.errors %}
            {% for error in form.image.errors %}
            <span class="wc-Form-helpMessage--imageUpload">{{ error }}</span>
            {% endfor %}
          {% endif %}
          <div class="wc-UploadForm-wrapper">
            <label class="form-label label-upload wc-UploadForm-label">
              <svg class="icon icon-big wc-UploadForm-icon" role="presentation">
                <use class="icon-upload" href="#svg-upload-2">Upload</use>
              </svg>
              Upload screenshot
            </label>
          </div>
          <button
            class="wc-UploadForm-button is-hidden r-ResetButton"
            role="button"
            type="button"
            tabindex="-1"
          >
            <img
              class="wc-Upload-Loader js-Upload-Loader"
              src="/img/upload-loader.svg"
              alt="Uploading image"
            >
            Remove image upload
          </button>
        </label>
      </div>
      <div class="form-button form-element js-Form-group">
        <button
          class="button button-primary wc-Button wc-Button--default js-Button"
          id="submitanon"
          type="button"
          value="github-proxy-report"
        >
          Report Anonymously
        </button>
        <button
          class="button button-primary wc-Button wc-Button--default js-Button"
          id="submitgithub"
          name="submit-type"
          type="submit"
          value="github-auth-report"
        >
          {% if session.username %}Report as {{ session.username }}{% else %}Report via GitHub{% endif %}
        </button>
      </div>
      <div class="is-hidden" aria-hidden="true">
        <div class="form-text form-element js-Form-group">
          {{ form.username.label(class_='form-label wc-Form-label') }}
          {% if form.username.errors %}
            {% for error in form.username.errors %}
              <span class="wc-Form-helpMessage">{{ error }}</span>
            {% endfor %}
          {% endif %}
          {{ form.username(class_='u-formInput') }}
        </div>
      </div>
    </div>
    {{ form.hidden_tag() }}
  </form>
</section>
